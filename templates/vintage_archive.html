{% load static tailwind_tags %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vintage Archive - StyleOdds</title>
{%tailwind_css%}  <link href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" rel="stylesheet">
  <!-- In <head> or just before </body> -->
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

</head>

<body class="bg-gray-100 font-sans">


<!-- Header -->
<header class="bg-white shadow sticky top-0 z-50">
  <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <div class="text-2xl font-bold text-black"><a href="{% url 'home' %}">StyleOdds</a></div>

    <!-- Desktop Menu -->
    <nav class="hidden md:flex space-x-8 text-gray-700 font-medium">
     
      <a href="{% url 'home' %}" class="hover:text-black transition">Home</a>
      <a href="{% url 'shop' %}" class="hover:text-black transition">Shop</a>
      <a href="{% url 'vintage_archive' %}" class="hover:text-black transition">Vintage Archive</a>
      <a href="{% url 'style_boards' %}" class="hover:text-black transition">Style Boards</a>
      <a href="{% url 'cart' %}" class="hover:text-black transition">Cart (<span id="cart-count">0</span>)</a>
      
      {% if user.is_authenticated %}
      <div x-data="{ open: false }" class="relative">
          <button @click="open = !open" class="rounded-full bg-gray-200 p-2 focus:outline-none">
              ðŸ‘¤
          </button>
          <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-32 bg-white border rounded shadow-md py-2">
              <a href="{% url 'profile' %}" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Profile</a>
              <a href="{% url 'logout' %}" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Logout</a>
          </div>
      </div>
  {% else %}
      <a href="{% url 'login' %}" class="text-gray-800 hover:text-gray-600 mx-2">Login</a>
      <a href="{% url 'signup' %}" class="text-gray-800 hover:text-gray-600 mx-2">Signup</a>
  {% endif %}

    </nav>

    <!-- Mobile Hamburger -->
    <div class="md:hidden">
      <button id="menu-btn" class="focus:outline-none">
        <svg class="w-8 h-8 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="menu" class="hidden md:hidden bg-white">
    <nav class="flex flex-col items-center py-4 space-y-4">
      <a href="#" class="hover:text-black">Home</a>
      <a href="#" class="hover:text-black">Shop</a>
      <a href="#" class="hover:text-black">Vintage Archive</a>
      <a href="#" class="hover:text-black">Style Boards</a>
      <a href="#" class="hover:text-black">Login</a>
    </nav>
  </div>
</header>


<!-- Carousel for Featured Vintage Items -->
<div class="swiper-container my-6">
  <div class="swiper-wrapper">
    <div class="swiper-slide">
      <img src="https://images.pexels.com/photos/1183242/pexels-photo-1183242.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="Featured Vintage 1" class="w-full h-80 object-cover rounded-lg">
    </div>
    <div class="swiper-slide">
      <img src="https://images.pexels.com/photos/1222270/pexels-photo-1222270.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="Featured Vintage 2" class="w-full h-80 object-cover rounded-lg">
    </div>
    <div class="swiper-slide">
      <img src="https://images.pexels.com/photos/1761166/pexels-photo-1761166.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="Featured Vintage 3" class="w-full h-80 object-cover rounded-lg">
    </div>
  </div>
  <div class="swiper-pagination"></div>
</div>

<!-- Filters -->
<div class="flex flex-wrap justify-center gap-3 p-6">
  <button onclick="filterProducts('all')" class="filter-btn">All</button>
  <button onclick="filterProducts('genz')" class="filter-btn">GenZ</button>
  <button onclick="filterProducts('90s')" class="filter-btn">90s</button>
  <button onclick="filterProducts('80s')" class="filter-btn">80s</button>
  <button onclick="filterProducts('20s')" class="filter-btn">20s</button>
  <button onclick="filterProducts('retro')" class="filter-btn">Retro</button>
  <button onclick="filterProducts('boho')" class="filter-btn">Boho</button>
  <button onclick="filterProducts('casual')" class="filter-btn">Casual</button>
  <button onclick="filterProducts('formal')" class="filter-btn">Formal</button>
</div>

<!-- Products -->
<div id="products" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6"></div>

<!-- Load More Button -->
<div class="flex justify-center my-6">
  <button onclick="loadMore()" id="loadMoreBtn" class="bg-black text-white py-3 px-8 rounded-full hover:bg-gray-800 transition text-lg hidden">
    Load More
  </button>
</div>

<!-- Tailwind Button Styles -->
<style>
  .filter-btn {
    @apply bg-black text-white py-2 px-5 rounded-full hover:bg-gray-800 transition text-sm;
  }
  .tag {
    @apply absolute top-2 left-2 bg-white text-black text-xs font-bold px-2 py-1 rounded;
  }
</style>

<!-- Script -->
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script>
const allProducts = [
  {
    name: "Grunge 90s Denim Combo",
    era: "90s",
    style: "Vintage 90s",
    price: 2499,
    image: "https://images.pexels.com/photos/1183242/pexels-photo-1183242.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Baggy jeans + Plaid shirt + Vintage sneakers."
  },
  {
    name: "Elegant 20s Gatsby Suit",
    era: "20s",
    style: "Vintage 20s",
    price: 4999,
    image: "https://images.pexels.com/photos/1222270/pexels-photo-1222270.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Three-piece classic suit inspired by 1920s style."
  },
  {
    name: "Retro Funky Streetwear",
    era: "retro",
    style: "Retro",
    price: 1999,
    image: "https://images.pexels.com/photos/1584739/pexels-photo-1584739.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Color-block oversized jacket + sneakers."
  },
  {
    name: "GenZ Baggy Casual Combo",
    era: "genz",
    style: "GenZ",
    price: 1799,
    image: "https://images.pexels.com/photos/2302155/pexels-photo-2302155.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Oversized T-shirt + Joggers + Chunky sneakers."
  },
  {
    name: "Classic 80s Blazer Power Look",
    era: "80s",
    style: "Vintage 80s",
    price: 2999,
    image: "https://images.pexels.com/photos/1761166/pexels-photo-1761166.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Power shoulder blazer + Formal trousers."
  },
  {
    name: "Vintage 70s Boho Chic",
    era: "retro",
    style: "Retro",
    price: 2299,
    image: "https://images.pexels.com/photos/1096940/pexels-photo-1096940.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Flared pants, fringed jackets and floral prints."
  },
  {
    name: "Minimal 20s Summer Dress",
    era: "20s",
    style: "Vintage 20s",
    price: 2599,
    image: "https://images.pexels.com/photos/4120414/pexels-photo-4120414.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
    description: "Lightweight linen dresses for the 20s summer look."
  }
];

let productsPerPage = 3;
let currentProducts = [];
let currentFilter = 'all';

function displayProducts(products) {
  const container = document.getElementById('products');
  container.innerHTML = '';

  const limitedProducts = products.slice(0, productsPerPage);

  limitedProducts.forEach(product => {
    container.innerHTML += `
      <div class="bg-white p-6 rounded-3xl shadow hover:shadow-lg transition flex flex-col relative">
        <span class="tag">${product.era}</span>
        <img src="${product.image}" alt="${product.name}" class="h-64 w-full object-cover rounded-xl mb-4">
        <h2 class="text-xl font-semibold text-gray-800 mb-2">${product.name}</h2>
        <p class="text-gray-500 text-sm mb-3">${product.description}</p>
        <div class="flex justify-between items-center mt-auto">
          <span class="text-lg font-bold text-green-600">â‚¹${product.price}</span>
          <button class="bg-black text-white px-4 py-2 rounded-full hover:bg-gray-800 transition">Add to Cart</button>
        </div>
      </div>
    `;
  });

  if (productsPerPage >= products.length) {
    document.getElementById('loadMoreBtn').classList.add('hidden');
  } else {
    document.getElementById('loadMoreBtn').classList.remove('hidden');
  }
}

function filterProducts(era) {
  currentFilter = era;
  productsPerPage = 3; // Reset when filter changes

  if (era === 'all') {
    currentProducts = allProducts;
  } else {
    currentProducts = allProducts.filter(product => product.era === era || product.style.toLowerCase() === era.toLowerCase());
  }
  displayProducts(currentProducts);
}

function loadMore() {
  productsPerPage += 3;
  displayProducts(currentProducts);
}

// Initialize Swiper
var swiper = new Swiper('.swiper-container', {
  slidesPerView: 1,
  spaceBetween: 10,
  loop: true,
  autoplay: {
    delay: 5000,
    disableOnInteraction: false,
  },
  pagination: {
    el: '.swiper-pagination',
    clickable: true,
  },
});

// Initial Load
currentProducts = allProducts;
displayProducts(currentProducts);
</script>

</body>
</html>
